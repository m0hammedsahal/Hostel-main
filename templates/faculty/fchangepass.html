{% extends 'base/web-base.html' %}/
{% load static %}
{% block container %}

<body>
    <section class="w-full h-[100vh] bg-[#F4F6FC] sm:bg-[url('{% static './web/images/bg-1.png' %}')] bg-cover bg-bottom">
        <div class="w-full h-[100vh]  flex justify-start  ">
            <div class="w-[720px] h-full  pl-[14%] " >
                <h3 class="text-[29px] font-bold text-[#2c2c56] mt-[25vh] mb-3">Change password</h3>
                <form id="password_change_form" method="post" action="{% url 'faculty:fupdatepass' %}">
                    {% csrf_token %}
                    <input name="password1" required type="password" placeholder="New password" id="newpass" class="focus:outline-none w-[330px] border-opacity-40 h-[39px] mt-2 border-blue-950 border-b-2 bg-[#F4F6FC] pl-4"><br><br>
                    <input name="password2" required type="password" placeholder="Confirm password" id="Confirmnewpass" class="focus:outline-none w-[330px] border-opacity-40 h-[39px] mt-2 border-blue-950 border-b-2 bg-[#F4F6FC] pl-4">
                    <button type="submit" id="update" class="block bg-[#2c2c56] w-[330px] mt-10 text-center text-[14px] rounded-md py-[6px] px-5 text-white font-semibold">Update password</button>
                </form>
                {% if error %}
                    <p>{{ message }}</p>
                {% endif %}
            </div>
            <div >
                <img class=" hidden sm:block w-[740px] pt-[28vh] " src="{% static './web/images/loginimg.png' %}" alt="img">
            </div>
        </div>
    </section>


    <script>
        $(document).ready(function() {
    $('#update').click(function(e) {
        e.preventDefault();
        var new_password = $('#newpass').val();
        var confirm_password = $('#Confirmnewpass').val();
        if (new_password === confirm_password) {
            $.ajax({
                type: 'POST',
                url: '{% url 'faculty:fupdatepass' %}',
                data: {
                    'new_password1': new_password,
                    'new_password2': confirm_password
                },
                success: function(data) {
                    console.log('Password updated successfully!');
                },
                error: function(xhr, status, error) {
                    console.log('Error updating password: ' + error);
                }
            });
        } else {
            alert('Passwords do not match!');
        }
    });
});


    </script>

    {% endblock %}